@use 'sass:map';
@use './tokens.map' as *;
@use './functions' as *;

// Flexbox
//  @include flex(direction, align, justify, gap, wrap);
@mixin flex(
  $direction: row,
  $align: center,
  $justify: flex-start,
  $gap: null,
  $wrap: nowrap
) {
  display: flex;
  flex-direction: $direction;
  align-items: $align;
  justify-content: $justify;
  flex-wrap: $wrap;

  @if $gap != null {
    gap: $gap;
  }
}

// Centering
//  @include center(axis);
//  axis: both | x | y
@mixin center($axis: both) {
  display: flex;

  @if $axis == both {
    align-items: center;
    justify-content: center;
  } @else if $axis == x {
    justify-content: center;
  } @else if $axis == y {
    align-items: center;
  }
}

// Center Absolute
//  @include center-absolute;
@mixin center-absolute {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// Screen Reader Only
//  @include sr-only;
@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Reduced Motion
//  @include reduced-motion;
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    animation: none !important;
    transition: none !important;
  }
}

// Responsive Utilities
//  @include show($breakpoint);
//  @include hide($breakpoint);
//  @include media-up($breakpoint) { ... }
//  @include media-down($breakpoint) { ... }
//  $breakpoint = 1xs | sm | md | lg | 1xl
@mixin show($breakpoint) {
  display: none;

  @media (min-width: breakpoint($breakpoint)) {
    display: block;
  }
}

@mixin hide($breakpoint) {
  display: block;

  @media (min-width: breakpoint($breakpoint)) {
    display: none;
  }
}

@mixin media-up($breakpoint) {
  @media (min-width: breakpoint($breakpoint)) {
    @content;
  }
}

@mixin media-down($breakpoint) {
  @media (max-width: calc(breakpoint($breakpoint) - 1px)) {
    @content;
  }
}


// Focus Ring
//  @include focus-ring($color, $offset);
//  $color  = any valid color value
//  $offset = any valid CSS length value (default: 2px)
@mixin focus-ring($color, $offset: 2px) {
  &:focus-visible {
    outline: border(2) solid $color;
    outline-offset: $offset;
  }
}

// Disable Text Selection
//  @include no-select;
@mixin no-select {
  -webkit-user-select: none; /* Safari */
  -moz-user-select: none;    /* Firefox */
  -ms-user-select: none;     /* IE10+/Edge */
  user-select: none;         /* Standard */
}

// Font Scale
//  @include font-scale($scale-name);
@mixin font-scale($scale-name) {
  $scale: map.get($typography, scales, $scale-name);

  font: weight(map.get($scale, weight))
        size(map.get($scale, size)) /
        line-height(map.get($scale, family))
        font(map.get($scale, family));

  text-transform: case(map.get($scale, case));
}

@mixin disabled {
  &:disabled,
  &[aria-disabled='true'] {
    opacity: opacity(disabled);
    cursor: not-allowed;
  }
}
